


<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,inital-scale=1,user-scalable=no">
  <title>vue学习笔记(二)————组件 [ lizehong ]</title>
  <!-- bootstrapcss文件 -->
 <!--  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<!--   <link rel="stylesheet" href="/css/zhl.css">
 -->
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/fork-awesome.min.css">
    
      <link rel="stylesheet" href="/css/zhl.css">
    
  
  
</head>
<body>
<div class="container-fluid">
  <div class="row">
  <div id="wrap" class="col-md-12">
    <div id="header">
	<div id="header-left">
	<h1 id="header-title"> 
	<a href="/">
		lizehong
	</a>
	</h1>
	
	</div>
	<div id="header-right">
		
		
		<a href="/"  title="home"><i class="fa fa-home ">home</i></a>
		
		<a href="https://github.com/lizehongss/demo_show"  title="demo"><i class="fa fa-code ">demo</i></a>
		
		<a href="/about"  title="about"><i class="fa fa-user ">about</i></a>
		
		<a href="/"  title="music"><i class="fa fa-music ">music</i></a>
		
		
	</div>
</div>

  </div>
  </div>
  <div id="content" class="row">
    <div id="content-left" class="col-md-4">
      

	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-th">分类</h3>
		<div class="widget">
		<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/QT/">QT</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/面试/">面试</a><span class="category-list-count">2</span></li></ul>
		</div>
	</div>


	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-tags">标签</h3>
		<div class="widget tags">
		<a class="tag-link" href="/tags/canvas/">canvas<span class="tag-count">1</span></a> <a class="tag-link" href="/tags/css/">css<span class="tag-count">1</span></a> <a class="tag-link" href="/tags/html5/">html5<span class="tag-count">1</span></a> <a class="tag-link" href="/tags/javascript/">javascript<span class="tag-count">1</span></a> <a class="tag-link" href="/tags/jquery/">jquery<span class="tag-count">1</span></a> <a class="tag-link" href="/tags/qt/">qt<span class="tag-count">2</span></a> <a class="tag-link" href="/tags/vue/">vue<span class="tag-count">2</span></a> <a class="tag-link" href="/tags/生活/">生活<span class="tag-count">2</span></a> <a class="tag-link" href="/tags/算法/">算法<span class="tag-count">2</span></a> <a class="tag-link" href="/tags/面试/">面试<span class="tag-count">2</span></a>
		</div>
	</div>


	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-archive">归档</h3>
		<div class="widget">
			<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017</a><span class="archive-list-count">5</span></li></ul>
		</div>
	</div>



    </div>
    <div id="content-right" class="col-md-8">
    
<article id="post">
	<div class="post-title">
  <h1>vue学习笔记(二)————组件</h1>
  	</div>
  <div class="page-meta">
  	<span class="fa-wrap">
  		<i class="fa fa-clock-o"></i>
  		<span class="date-meta">2018-02-11</span>
  	</span>
  	<span class="fa-wrap">
  		
  		<i class="fa fa-tags"></i>
  		<span class="tags-meta">vue</span>
  		
  	</span>
  	<span class="fa-wrap">
  		
  		<i class="fa fa-th"></i>
  		<span class="categories-meta">vue</span>
  		
  	</span>
  </div>
  <div class="post-content">
  <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>主要是有关vue组件的笔记，然后也不想为了定blog而写blog,所以应该会写一些真的自己想记下来的东西，也希望可以尽量精简的写</p>
<h1 id="组件用法"><a href="#组件用法" class="headerlink" title="组件用法"></a>组件用法</h1><p>需要注册才能使用组件，注册分为局部注册和全局注册，代码示例如下：</p>
<p><strong>必须在实例注册，组件才可以使用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//全局注册</div><div class="line">Vue.component(&quot;组件名&quot;,&#123;</div><div class="line"></div><div class="line">    //选项</div><div class="line">    </div><div class="line">&#125;);</div><div class="line">//局部注册</div><div class="line">var 组件名 =&#123;</div><div class="line">    //选项</div><div class="line">&#125;</div><div class="line">html模板如下：</div><div class="line">&lt;组件名&gt;&lt;/组件名</div></pre></td></tr></table></figure></p>
<h1 id="组件选项"><a href="#组件选项" class="headerlink" title="组件选项"></a>组件选项</h1><h2 id="template"><a href="#template" class="headerlink" title="template"></a>template</h2><p>temlplate后面是要渲染的内容，必须有一个元素包围它，代码如下：</p>
<p><strong>注意v-show不能用在template中，可以使用v-if</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Vue.component(&quot;组件名&quot;,&#123;</div><div class="line">template: &apos;&lt;div&gt;&lt;/div&gt;&apos;;</div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="data"><a href="#data" class="headerlink" title="data"></a>data</h2><p>data的用法与实方法相同，不同的是要将数据return出去，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Vue.component(&quot;组件名&quot;,&#123;</div><div class="line">.....</div><div class="line">data : function&#123;</div><div class="line">    return  &#123;</div><div class="line">        mws: &quot;text&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p>props主要是用来接收来自父组件的数据，可以是字符串数组和对象<br><strong>注意数据是单向的，只能父组件传到子组件</strong><br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">html:</div><div class="line"></div><div class="line">&lt;mytext message=&quot;text&quot;&gt;&lt;/mytext&gt;</div><div class="line"></div><div class="line">js：</div><div class="line">Vue.component(&quot;mytext&quot;,&#123;</div><div class="line">    props:[&apos;message&apos;]</div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>props的数据可以进行验证，代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">props: &#123;</div><div class="line">    message : &#123;</div><div class="line">        type:Number， //类型</div><div class="line">        default:&quot;&quot;text //如果没有定义的默认值</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="wath"><a href="#wath" class="headerlink" title="wath"></a>wath</h2><p> 主要是用来监听props的值的改变，从而通知父组件或者更新props值<br> 代码如下<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">watch:&#123;</div><div class="line">    message: function(val)&#123;</div><div class="line">        //当message发生改变时触发的函数 </div><div class="line">        //val 为更新后的message值</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h1><h2 id="父组件向子组件通信"><a href="#父组件向子组件通信" class="headerlink" title="父组件向子组件通信"></a>父组件向子组件通信</h2><p>使用上面的props即可</p>
<h2 id="子组件向父组件通信"><a href="#子组件向父组件通信" class="headerlink" title="子组件向父组件通信"></a>子组件向父组件通信</h2><p>使用自定义事件，子组件用$emit()来触发向父组件通信的事件代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">html:</div><div class="line">&lt;mytext @send=&quot;handle&quot;&gt;&lt;/mytext&gt;</div><div class="line">//其中send为子组件发送过来的参数，为自定义事件的名称</div><div class="line">Vue.component(&quot;mytext&quot;,&#123;</div><div class="line">template:&apos;&lt;button @click=&quot;hadles&quot;&gt;&apos;,</div><div class="line">methods:&#123;</div><div class="line">    hadles: function()&#123;</div><div class="line">        this.$emit(&apos;handle&apos;,数据);</div><div class="line">        //第一个参数为事件名称，第二个为发送的数据</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><em>可以使用v-model来简化，不过个人感觉没有必要，所以不想写在这里做总结。。。。。。</em></p>
<h2 id="非父子组件通信"><a href="#非父子组件通信" class="headerlink" title="非父子组件通信"></a>非父子组件通信</h2><p>在vue.js2.x中使用一个空的vu实例来作中介，组件把自定义事件名称和数据发送到这个空实例，其它实例或组件通过监听空实例的自定义事件来刷新数据<br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var bus =new Vue();</div><div class="line">bus.$emit(&apos;clicks&apos;,mes);</div><div class="line">bus.$on(&apos;clicks&apos;,function()&#123;&#125;);</div></pre></td></tr></table></figure></p>
<p>补充：<br>当子组件较多时，可以用ref属性为组件指定一个索引名称：代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">html代码如下：</div><div class="line">&lt;mytext ref=&quot;A&gt;&lt;/mytext&gt;</div><div class="line">//调用指定的子组件的message</div><div class="line">var msg=this.$refs.comA.message</div></pre></td></tr></table></figure></p>
<h1 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h1><p>slot是内容分发，用在将父组件的dom结构挂载，它与props,events触发事件构成组件的3个APi来源.<br><strong>slot的作用域是在父组件上</strong><br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;mytext&gt;</div><div class="line">&lt;p&gt;&lt;/p&gt;//挂载内容 </div><div class="line">&lt;/mytext&gt;</div><div class="line">Vue.component(&quot;mytext&quot;,&#123;</div><div class="line">template:&apos;</div><div class="line">    &lt;div&gt;</div><div class="line">    &lt;slot&gt;</div><div class="line">    &lt;p&gt;&lt;/p&gt;//没有内容时的默认内容</div><div class="line">    &lt;/slot&gt;//父组件的内容将挂载在slot里面</div><div class="line">    &lt;/div&gt;</div><div class="line">&apos;</div><div class="line">    </div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>可以给slot指定一个name，使用分发指定内容代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;mytext&gt;</div><div class="line">&lt;p slot=&quot;one&quot;&gt;&lt;/p&gt;//挂载内容,slot为具名slot</div><div class="line">&lt;/mytext&gt;</div><div class="line">Vue.component(&quot;mytext&quot;,&#123;</div><div class="line">template:&apos;</div><div class="line">    &lt;div&gt;</div><div class="line">    &lt;slot&gt;</div><div class="line">    &lt;p&gt;&lt;/p&gt;//没有内容时的默认内容</div><div class="line">    &lt;/slot&gt;//父组件的内容将挂载在slot里面</div><div class="line">    &lt;slot name=&quot;one&quot;&gt;//具名slot将分发在这里</div><div class="line">    &lt;/div&gt;</div><div class="line">&apos;</div></pre></td></tr></table></figure></p>
<p>也可以指定数据传递到父组件的挂载里，使用scope,代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;mytext&gt;</div><div class="line">&lt;p slot=&quot;one&quot; scope=&quot;props&quot;&gt;</div><div class="line">    &#123;&#123;props.msg&#125;&#125; //显示子组件的msg</div><div class="line">&lt;/p&gt;//挂载内容,slot为具名slot,props为临时变量</div><div class="line">&lt;/mytext&gt;</div><div class="line">Vue.component(&quot;mytext&quot;,&#123;</div><div class="line">template:&apos;</div><div class="line">    &lt;div&gt;</div><div class="line">    &lt;slot&gt;</div><div class="line">    &lt;p&gt;&lt;/p&gt;//没有内容时的默认内容</div><div class="line">    &lt;/slot&gt;//父组件的内容将挂载在slot里面</div><div class="line">    &lt;slot name=&quot;one&quot; msg=&quot;数据&quot;&gt;//具名slot将分发在这里</div><div class="line">    //msg为向父组件传递的数据</div><div class="line">    &lt;/div&gt;</div><div class="line">&apos;</div></pre></td></tr></table></figure></p>
<p>可以使用$slots访问分发的内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var header =this.$slots.one;</div></pre></td></tr></table></figure></p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><pre><code>还有许多关于组件的高级用法，不过我不是大佬，等以后用到再写吧。写完收工睡觉
</code></pre>
	</div>
</article>



    </div>
  </div>
  <div class="row">
<div id="bottom" class="col-md-12"> 
  <div class="bottom-nav">
	
	
	<a href="https://github.com/lizehongss" class="fa fa-github fa-2x" target="_blank" title="Follow me" ></a>
	
	
</div>
<div class="bottom-info">
	&copy; 2018 lizehong<br>
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	theme <a href="https://github.com/lizehongss/hexo-theme-zhl" target="_blank">zhl</a>
</div>
</div>
</div>
</div>
<div id="tool">
  <ul>
    <li class="fa fa-angle-up top" id="top"></li>
  </ul>
</div>
  <div class="bg_content">
    <canvas id="canvas"></canvas>
  </div>
  
  <!-- scripts list from theme config.yml -->
  
    <script src="/js/zhl.js"></script>
  
    <script src="/js/bj.js"></script>
  

<!-- jQ cdn  -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<!-- bootstrap js cdn-->
<!-- <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->


</body>
</html>
